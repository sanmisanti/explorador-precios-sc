"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/consultar-precios";
exports.ids = ["pages/api/consultar-precios"];
exports.modules = {

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "cheerio":
/*!**************************!*\
  !*** external "cheerio" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("cheerio");

/***/ }),

/***/ "mssql":
/*!************************!*\
  !*** external "mssql" ***!
  \************************/
/***/ ((module) => {

module.exports = require("mssql");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "user-agents":
/*!******************************!*\
  !*** external "user-agents" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("user-agents");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fconsultar-precios&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cconsultar-precios.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fconsultar-precios&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cconsultar-precios.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_consultar_precios_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\consultar-precios.js */ \"(api)/./pages/api/consultar-precios.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_consultar_precios_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_consultar_precios_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/consultar-precios\",\n        pathname: \"/api/consultar-precios\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_consultar_precios_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNvbnN1bHRhci1wcmVjaW9zJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNjb25zdWx0YXItcHJlY2lvcy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMrRDtBQUMvRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDREQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4cGxvcmFkb3ItcHJlY2lvcy1uZXh0anMvPzFhN2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxjb25zdWx0YXItcHJlY2lvcy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbnN1bHRhci1wcmVjaW9zXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29uc3VsdGFyLXByZWNpb3NcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fconsultar-precios&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cconsultar-precios.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    closeDatabase: function() {\n        return closeDatabase;\n    },\n    consultarPrecios: function() {\n        return consultarPrecios;\n    },\n    getDatabase: function() {\n        return getDatabase;\n    }\n});\nconst sql = __webpack_require__(/*! mssql */ \"mssql\");\n// Configuración de base de datos SQL Server\nconst config = {\n    server: \"localhost\",\n    database: \"COMPRAS_SALTA\",\n    user: \"sa\",\n    password: \"sa\",\n    port: 1433,\n    options: {\n        encrypt: false,\n        trustServerCertificate: true,\n        enableArithAbort: true\n    }\n};\nlet pool;\n// Función para obtener la conexión a la base de datos\nasync function getDatabase() {\n    if (!pool) {\n        try {\n            pool = await sql.connect(config);\n            console.log(\"✅ Conectado a SQL Server exitosamente\");\n        } catch (err) {\n            console.error(\"❌ Error conectando a la base de datos:\", err);\n            throw err;\n        }\n    }\n    return pool;\n}\n// Función para ejecutar consultas de precios\nasync function consultarPrecios(codigo) {\n    const pool = await getDatabase();\n    const query = `\r\n        select\r\n        top 10\r\n\tii.Descripcion,\r\n\tplda.EspecificacionesTecnicas,\r\n\tplda.Observaciones,\r\n\tpl.PrecioUnitario as PrecioPliego,\r\n\tpl.NumeroLinea,\r\n\tp.NumeroPliego,\r\n\tdpa.PrecioUnitarioFinalDescuento as PrecioPreadjudicado,\r\n\tpl.PrecioUnitario-dpa.PrecioUnitarioFinalDescuento as PliegoAdj\r\nfrom pli.PliegoLinea pl\r\nleft join pli.Pliego p\r\n\ton pl.IdPliego = p.IdPliego\r\nleft join ofe.LineaOferta lo\r\n\ton pl.IdPliegoLinea = lo.idLineaPliego\r\nleft join eva.DetPreAdjudicacion dpa\r\n\ton dpa.IdLineaOferta = lo.IdLineaOferta\r\nleft JOIN COMPRAS_SALTA.pli.PliegoSolicitudGasto psg\r\n\tON psg.IdPliego = p.IdPliego\r\nleft join pli.PliegoLineaDetalleAgrupacion plda\r\n\ton plda.IdPliegoLinea = pl.IdPliegoLinea\r\nleft join rib.ItemInstanciado ii\r\n\ton pl.IdClasificacion = ii.IdItemInstanciado\r\nwhere 1=1\r\nand plda.EspecificacionesTecnicas <> ''\r\nand plda.Observaciones <> ''\r\nand upper(plda.Observaciones) not like '%ALIN%'\r\nand upper(plda.EspecificacionesTecnicas) not like '%ALIN%'\r\n            and pl.IdClasificacion = @codigo\r\n    `;\n    const request = pool.request();\n    request.input(\"codigo\", sql.Int, parseInt(codigo));\n    const result = await request.query(query);\n    return result.recordset;\n}\n// Función para cerrar la conexión (útil para cleanup)\nasync function closeDatabase() {\n    if (pool) {\n        await pool.close();\n        pool = null;\n        console.log(\"\\uD83D\\uDD10 Conexi\\xf3n a la base de datos cerrada\");\n    }\n}\n// Exportaciones CommonJS (compatibilidad hacia atrás)\nmodule.exports = {\n    getDatabase,\n    consultarPrecios,\n    closeDatabase\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7SUE0RndDQSxhQUFhO2VBQWJBOztJQUFsQkMsZ0JBQWdCO2VBQWhCQTs7SUFBYkMsV0FBVztlQUFYQTs7O0FBNUZULE1BQU1DLE1BQU1DLG1CQUFPQSxDQUFDO0FBRXBCLDRDQUE0QztBQUM1QyxNQUFNQyxTQUFTO0lBQ1hDLFFBQVE7SUFDUkMsVUFBVTtJQUNWQyxNQUFNO0lBQ05DLFVBQVU7SUFDVkMsTUFBTTtJQUNOQyxTQUFTO1FBQ0xDLFNBQVM7UUFDVEMsd0JBQXdCO1FBQ3hCQyxrQkFBa0I7SUFDdEI7QUFDSjtBQUVBLElBQUlDO0FBRUosc0RBQXNEO0FBQ3RELGVBQWViO0lBQ1gsSUFBSSxDQUFDYSxNQUFNO1FBQ1AsSUFBSTtZQUNBQSxPQUFPLE1BQU1aLElBQUlhLE9BQU8sQ0FBQ1g7WUFDekJZLFFBQVFDLEdBQUcsQ0FBQztRQUNoQixFQUFFLE9BQU9DLEtBQUs7WUFDVkYsUUFBUUcsS0FBSyxDQUFDLDBDQUEwQ0Q7WUFDeEQsTUFBTUE7UUFDVjtJQUNKO0lBQ0EsT0FBT0o7QUFDWDtBQUVBLDZDQUE2QztBQUM3QyxlQUFlZCxpQkFBaUJvQixNQUFNO0lBQ2xDLE1BQU1OLE9BQU8sTUFBTWI7SUFFbkIsTUFBTW9CLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBOEJmLENBQUM7SUFFRCxNQUFNQyxVQUFVUixLQUFLUSxPQUFPO0lBQzVCQSxRQUFRQyxLQUFLLENBQUMsVUFBVXJCLElBQUlzQixHQUFHLEVBQUVDLFNBQVNMO0lBRTFDLE1BQU1NLFNBQVMsTUFBTUosUUFBUUQsS0FBSyxDQUFDQTtJQUNuQyxPQUFPSyxPQUFPQyxTQUFTO0FBQzNCO0FBRUEsc0RBQXNEO0FBQ3RELGVBQWU1QjtJQUNYLElBQUllLE1BQU07UUFDTixNQUFNQSxLQUFLYyxLQUFLO1FBQ2hCZCxPQUFPO1FBQ1BFLFFBQVFDLEdBQUcsQ0FBQztJQUNoQjtBQUNKO0FBRUEsc0RBQXNEO0FBQ3REWSxPQUFPQyxPQUFPLEdBQUc7SUFDYjdCO0lBQ0FEO0lBQ0FEO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leHBsb3JhZG9yLXByZWNpb3MtbmV4dGpzLy4vbGliL2RhdGFiYXNlLmpzP2VlYTUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3FsID0gcmVxdWlyZSgnbXNzcWwnKTtcclxuXHJcbi8vIENvbmZpZ3VyYWNpw7NuIGRlIGJhc2UgZGUgZGF0b3MgU1FMIFNlcnZlclxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgICBzZXJ2ZXI6ICdsb2NhbGhvc3QnLFxyXG4gICAgZGF0YWJhc2U6ICdDT01QUkFTX1NBTFRBJyxcclxuICAgIHVzZXI6ICdzYScsXHJcbiAgICBwYXNzd29yZDogJ3NhJyxcclxuICAgIHBvcnQ6IDE0MzMsXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgZW5jcnlwdDogZmFsc2UsXHJcbiAgICAgICAgdHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZTogdHJ1ZSxcclxuICAgICAgICBlbmFibGVBcml0aEFib3J0OiB0cnVlXHJcbiAgICB9XHJcbn07XHJcblxyXG5sZXQgcG9vbDtcclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgb2J0ZW5lciBsYSBjb25leGnDs24gYSBsYSBiYXNlIGRlIGRhdG9zXHJcbmFzeW5jIGZ1bmN0aW9uIGdldERhdGFiYXNlKCkge1xyXG4gICAgaWYgKCFwb29sKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcG9vbCA9IGF3YWl0IHNxbC5jb25uZWN0KGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29uZWN0YWRvIGEgU1FMIFNlcnZlciBleGl0b3NhbWVudGUnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNvbmVjdGFuZG8gYSBsYSBiYXNlIGRlIGRhdG9zOicsIGVycik7XHJcbiAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9vbDtcclxufVxyXG5cclxuLy8gRnVuY2nDs24gcGFyYSBlamVjdXRhciBjb25zdWx0YXMgZGUgcHJlY2lvc1xyXG5hc3luYyBmdW5jdGlvbiBjb25zdWx0YXJQcmVjaW9zKGNvZGlnbykge1xyXG4gICAgY29uc3QgcG9vbCA9IGF3YWl0IGdldERhdGFiYXNlKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHF1ZXJ5ID0gYFxyXG4gICAgICAgIHNlbGVjdFxyXG4gICAgICAgIHRvcCAxMFxyXG5cdGlpLkRlc2NyaXBjaW9uLFxyXG5cdHBsZGEuRXNwZWNpZmljYWNpb25lc1RlY25pY2FzLFxyXG5cdHBsZGEuT2JzZXJ2YWNpb25lcyxcclxuXHRwbC5QcmVjaW9Vbml0YXJpbyBhcyBQcmVjaW9QbGllZ28sXHJcblx0cGwuTnVtZXJvTGluZWEsXHJcblx0cC5OdW1lcm9QbGllZ28sXHJcblx0ZHBhLlByZWNpb1VuaXRhcmlvRmluYWxEZXNjdWVudG8gYXMgUHJlY2lvUHJlYWRqdWRpY2FkbyxcclxuXHRwbC5QcmVjaW9Vbml0YXJpby1kcGEuUHJlY2lvVW5pdGFyaW9GaW5hbERlc2N1ZW50byBhcyBQbGllZ29BZGpcclxuZnJvbSBwbGkuUGxpZWdvTGluZWEgcGxcclxubGVmdCBqb2luIHBsaS5QbGllZ28gcFxyXG5cdG9uIHBsLklkUGxpZWdvID0gcC5JZFBsaWVnb1xyXG5sZWZ0IGpvaW4gb2ZlLkxpbmVhT2ZlcnRhIGxvXHJcblx0b24gcGwuSWRQbGllZ29MaW5lYSA9IGxvLmlkTGluZWFQbGllZ29cclxubGVmdCBqb2luIGV2YS5EZXRQcmVBZGp1ZGljYWNpb24gZHBhXHJcblx0b24gZHBhLklkTGluZWFPZmVydGEgPSBsby5JZExpbmVhT2ZlcnRhXHJcbmxlZnQgSk9JTiBDT01QUkFTX1NBTFRBLnBsaS5QbGllZ29Tb2xpY2l0dWRHYXN0byBwc2dcclxuXHRPTiBwc2cuSWRQbGllZ28gPSBwLklkUGxpZWdvXHJcbmxlZnQgam9pbiBwbGkuUGxpZWdvTGluZWFEZXRhbGxlQWdydXBhY2lvbiBwbGRhXHJcblx0b24gcGxkYS5JZFBsaWVnb0xpbmVhID0gcGwuSWRQbGllZ29MaW5lYVxyXG5sZWZ0IGpvaW4gcmliLkl0ZW1JbnN0YW5jaWFkbyBpaVxyXG5cdG9uIHBsLklkQ2xhc2lmaWNhY2lvbiA9IGlpLklkSXRlbUluc3RhbmNpYWRvXHJcbndoZXJlIDE9MVxyXG5hbmQgcGxkYS5Fc3BlY2lmaWNhY2lvbmVzVGVjbmljYXMgPD4gJydcclxuYW5kIHBsZGEuT2JzZXJ2YWNpb25lcyA8PiAnJ1xyXG5hbmQgdXBwZXIocGxkYS5PYnNlcnZhY2lvbmVzKSBub3QgbGlrZSAnJUFMSU4lJ1xyXG5hbmQgdXBwZXIocGxkYS5Fc3BlY2lmaWNhY2lvbmVzVGVjbmljYXMpIG5vdCBsaWtlICclQUxJTiUnXHJcbiAgICAgICAgICAgIGFuZCBwbC5JZENsYXNpZmljYWNpb24gPSBAY29kaWdvXHJcbiAgICBgO1xyXG5cclxuICAgIGNvbnN0IHJlcXVlc3QgPSBwb29sLnJlcXVlc3QoKTtcclxuICAgIHJlcXVlc3QuaW5wdXQoJ2NvZGlnbycsIHNxbC5JbnQsIHBhcnNlSW50KGNvZGlnbykpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0LnF1ZXJ5KHF1ZXJ5KTtcclxuICAgIHJldHVybiByZXN1bHQucmVjb3Jkc2V0O1xyXG59XHJcblxyXG4vLyBGdW5jacOzbiBwYXJhIGNlcnJhciBsYSBjb25leGnDs24gKMO6dGlsIHBhcmEgY2xlYW51cClcclxuYXN5bmMgZnVuY3Rpb24gY2xvc2VEYXRhYmFzZSgpIHtcclxuICAgIGlmIChwb29sKSB7XHJcbiAgICAgICAgYXdhaXQgcG9vbC5jbG9zZSgpO1xyXG4gICAgICAgIHBvb2wgPSBudWxsO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SQIENvbmV4acOzbiBhIGxhIGJhc2UgZGUgZGF0b3MgY2VycmFkYScpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnRhY2lvbmVzIENvbW1vbkpTIChjb21wYXRpYmlsaWRhZCBoYWNpYSBhdHLDoXMpXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgZ2V0RGF0YWJhc2UsXHJcbiAgICBjb25zdWx0YXJQcmVjaW9zLFxyXG4gICAgY2xvc2VEYXRhYmFzZVxyXG59O1xyXG5cclxuLy8gRXhwb3J0YWNpb25lcyBFUyBtb2R1bGVzXHJcbmV4cG9ydCB7IGdldERhdGFiYXNlLCBjb25zdWx0YXJQcmVjaW9zLCBjbG9zZURhdGFiYXNlIH07ICJdLCJuYW1lcyI6WyJjbG9zZURhdGFiYXNlIiwiY29uc3VsdGFyUHJlY2lvcyIsImdldERhdGFiYXNlIiwic3FsIiwicmVxdWlyZSIsImNvbmZpZyIsInNlcnZlciIsImRhdGFiYXNlIiwidXNlciIsInBhc3N3b3JkIiwicG9ydCIsIm9wdGlvbnMiLCJlbmNyeXB0IiwidHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZSIsImVuYWJsZUFyaXRoQWJvcnQiLCJwb29sIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJlcnIiLCJlcnJvciIsImNvZGlnbyIsInF1ZXJ5IiwicmVxdWVzdCIsImlucHV0IiwiSW50IiwicGFyc2VJbnQiLCJyZXN1bHQiLCJyZWNvcmRzZXQiLCJjbG9zZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database.js\n");

/***/ }),

/***/ "(api)/./lib/mercadoLibreScraper.js":
/*!************************************!*\
  !*** ./lib/mercadoLibreScraper.js ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst axios = __webpack_require__(/*! axios */ \"axios\");\nconst cheerio = __webpack_require__(/*! cheerio */ \"cheerio\");\nconst UserAgent = __webpack_require__(/*! user-agents */ \"user-agents\");\nclass MercadoLibreScraper {\n    constructor(){\n        this.baseURL = \"https://listado.mercadolibre.com.ar\";\n        this.userAgent = new UserAgent();\n        this.delay = 1000; // Delay entre requests para ser respetuosos\n    }\n    // Función para limpiar y preparar el texto de búsqueda\n    prepararTextoBusqueda(especificaciones, observaciones) {\n        let texto = \"\";\n        if (especificaciones && especificaciones.trim()) {\n            texto += especificaciones.trim();\n        }\n        if (observaciones && observaciones.trim()) {\n            if (texto) texto += \" \";\n            texto += observaciones.trim();\n        }\n        if (!texto) {\n            return null;\n        }\n        // Limpiar el texto: remover caracteres especiales, HTML, etc.\n        texto = texto.replace(/<[^>]*>/g, \"\") // Remover HTML tags\n        .replace(/[^\\w\\s\\-\\.]/g, \" \") // Remover caracteres especiales excepto guiones y puntos\n        .replace(/\\s+/g, \" \") // Reemplazar múltiples espacios por uno solo\n        .trim();\n        // Tomar solo las primeras palabras más relevantes (máximo 10 palabras)\n        const palabras = texto.split(\" \").slice(0, 10);\n        return palabras.join(\" \");\n    }\n    // Función para hacer la búsqueda en MercadoLibre\n    async buscarProducto(especificaciones, observaciones) {\n        const textoBusqueda = this.prepararTextoBusqueda(especificaciones, observaciones);\n        if (!textoBusqueda) {\n            return {\n                success: false,\n                error: \"No hay texto suficiente para buscar\",\n                resultados: []\n            };\n        }\n        try {\n            const searchURL = `${this.baseURL}/${encodeURIComponent(textoBusqueda)}`;\n            console.log(`🔍 Buscando en MercadoLibre: \"${textoBusqueda}\"`);\n            const response = await axios.get(searchURL, {\n                headers: {\n                    \"User-Agent\": this.userAgent.toString(),\n                    \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                    \"Accept-Language\": \"es-AR,es;q=0.9,en;q=0.8\",\n                    \"Accept-Encoding\": \"gzip, deflate, br\",\n                    \"DNT\": \"1\",\n                    \"Connection\": \"keep-alive\",\n                    \"Upgrade-Insecure-Requests\": \"1\"\n                },\n                timeout: 10000\n            });\n            return this.extraerResultados(response.data, textoBusqueda);\n        } catch (error) {\n            console.error(\"Error en b\\xfasqueda de MercadoLibre:\", error.message);\n            return {\n                success: false,\n                error: error.message,\n                resultados: []\n            };\n        }\n    }\n    // Función para extraer los resultados del HTML\n    extraerResultados(html, textoBusqueda) {\n        try {\n            const $ = cheerio.load(html);\n            const resultados = [];\n            // Selectores para los productos (actualizados según estructura actual de ML)\n            const selectoresProducto = [\n                \"li.ui-search-layout__item:not([picreplacementreplaced])\",\n                \"li.ui-search-layout__item\",\n                \".ui-search-results .ui-search-result__wrapper\",\n                \".ui-search-results .ui-search-result\",\n                \".results-item\",\n                \".item\" // Legacy\n            ];\n            let productosEncontrados = false;\n            for (const selector of selectoresProducto){\n                const productos = $(selector);\n                if (productos.length > 0) {\n                    productosEncontrados = true;\n                    productos.each((index, elemento)=>{\n                        if (resultados.length >= 3) return false; // Solo los primeros 3\n                        const $elemento = $(elemento);\n                        // Extraer información del producto\n                        const titulo = this.extraerTitulo($elemento);\n                        const precio = this.extraerPrecio($elemento);\n                        const link = this.extraerLink($elemento);\n                        const imagen = this.extraerImagen($elemento);\n                        if (titulo && precio && link) {\n                            resultados.push({\n                                titulo: titulo.trim(),\n                                precio: precio.trim(),\n                                link: link,\n                                imagen: imagen,\n                                posicion: resultados.length + 1\n                            });\n                        }\n                    });\n                    break;\n                }\n            }\n            if (!productosEncontrados) {\n                console.log(\"No se encontraron productos con los selectores conocidos\");\n            }\n            // Ordenar resultados por precio de menor a mayor\n            const resultadosOrdenados = this.ordenarPorPrecio(resultados);\n            return {\n                success: true,\n                textoBusqueda: textoBusqueda,\n                cantidadEncontrada: resultadosOrdenados.length,\n                resultados: resultadosOrdenados\n            };\n        } catch (error) {\n            console.error(\"Error extrayendo resultados:\", error.message);\n            return {\n                success: false,\n                error: error.message,\n                resultados: []\n            };\n        }\n    }\n    extraerTitulo($elemento) {\n        const selectoresTitulo = [\n            \"a.poly-component__title\",\n            \".ui-search-item__title\",\n            \".item__title\",\n            \"h2 a\",\n            \".item-title a\",\n            \"a[title]\" // Legacy\n        ];\n        for (const selector of selectoresTitulo){\n            const titulo = $elemento.find(selector).first().text() || $elemento.find(selector).first().attr(\"title\");\n            if (titulo && titulo.trim()) {\n                return titulo.trim();\n            }\n        }\n        return null;\n    }\n    extraerPrecio($elemento) {\n        const selectoresPrecio = [\n            \".andes-money-amount__fraction\",\n            \".ui-search-price__second-line .price-tag-amount .andes-money-amount__fraction\",\n            \".price .price-tag .price-tag-amount .andes-money-amount__fraction\",\n            \".ui-search-price .andes-money-amount__fraction\",\n            \".price-tag-amount .andes-money-amount__fraction\",\n            \".price .price-tag-fraction\",\n            \".item-price\",\n            \".price\" // Legacy\n        ];\n        for (const selector of selectoresPrecio){\n            const precio = $elemento.find(selector).first().text();\n            if (precio && precio.trim()) {\n                return `$${precio.trim()}`;\n            }\n        }\n        return \"Precio no disponible\";\n    }\n    extraerLink($elemento) {\n        const selectoresLink = [\n            \"a.poly-component__title\",\n            \".ui-search-item__group__element a\",\n            \".ui-search-item__title-label\",\n            \".item__title a\",\n            \"h2 a\",\n            \"a\" // Legacy\n        ];\n        for (const selector of selectoresLink){\n            const $link = $elemento.find(selector).first();\n            let href = $link.attr(\"href\");\n            if (href) {\n                // Limpiar parámetros innecesarios de la URL de ML\n                if (href.includes(\"#\")) {\n                    href = href.split(\"#\")[0];\n                }\n                if (href.includes(\"&amp;\")) {\n                    href = href.split(\"&amp;\")[0];\n                }\n                // Asegurar que sea una URL completa\n                if (href.startsWith(\"/\")) {\n                    href = \"https://www.mercadolibre.com.ar\" + href;\n                } else if (!href.startsWith(\"http\")) {\n                    href = \"https://www.mercadolibre.com.ar/\" + href;\n                }\n                return href;\n            }\n        }\n        return null;\n    }\n    extraerImagen($elemento) {\n        const selectoresImagen = [\n            \".ui-search-result-image img\",\n            \".item-image img\",\n            \"img\"\n        ];\n        for (const selector of selectoresImagen){\n            const src = $elemento.find(selector).first().attr(\"src\") || $elemento.find(selector).first().attr(\"data-src\");\n            if (src && src.includes(\"http\")) {\n                return src;\n            }\n        }\n        return null;\n    }\n    // Función para ordenar productos por precio de menor a mayor\n    ordenarPorPrecio(productos) {\n        const productosOrdenados = productos.sort((a, b)=>{\n            const precioA = this.extraerNumeroDelPrecio(a.precio);\n            const precioB = this.extraerNumeroDelPrecio(b.precio);\n            // Si no se puede extraer el precio, poner al final\n            if (precioA === null && precioB === null) return 0;\n            if (precioA === null) return 1;\n            if (precioB === null) return -1;\n            return precioA - precioB; // Orden ascendente (menor a mayor)\n        });\n        // Actualizar la posición después del ordenamiento\n        productosOrdenados.forEach((producto, index)=>{\n            producto.posicion = index + 1;\n        });\n        return productosOrdenados;\n    }\n    // Función para extraer el número del precio (ej: \"$603.899\" -> 603899)\n    extraerNumeroDelPrecio(precioString) {\n        if (!precioString || precioString === \"Precio no disponible\") {\n            return null;\n        }\n        // Remover símbolo de peso, espacios y puntos de miles\n        const numeroLimpio = precioString.replace(/[$\\s]/g, \"\") // Remover $ y espacios\n        .replace(/\\./g, \"\") // Remover puntos de miles (ej: 603.899 -> 603899)\n        .replace(/,/g, \".\"); // Convertir comas decimales a puntos (ej: 1,50 -> 1.50)\n        const numero = parseFloat(numeroLimpio);\n        return isNaN(numero) ? null : numero;\n    }\n    // Función para agregar delay entre requests\n    async delay(ms) {\n        return new Promise((resolve)=>setTimeout(resolve, ms));\n    }\n}\nmodule.exports = MercadoLibreScraper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMsbUNBQW1DO1FBQ2pFO1FBRUEsa0RBQWtEO1FBQ2xETixtQkFBbUJPLE9BQU8sQ0FBQyxDQUFDQyxVQUFVckM7WUFDbENxQyxTQUFTekIsUUFBUSxHQUFHWixRQUFRO1FBQ2hDO1FBRUEsT0FBTzZCO0lBQ1g7SUFFQSx1RUFBdUU7SUFDdkVLLHVCQUF1QkksWUFBWSxFQUFFO1FBQ2pDLElBQUksQ0FBQ0EsZ0JBQWdCQSxpQkFBaUIsd0JBQXdCO1lBQzFELE9BQU87UUFDWDtRQUVBLHNEQUFzRDtRQUN0RCxNQUFNQyxlQUFlRCxhQUNoQnJFLE9BQU8sQ0FBQyxVQUFVLElBQWMsdUJBQXVCO1NBQ3ZEQSxPQUFPLENBQUMsT0FBTyxJQUFpQixrREFBa0Q7U0FDbEZBLE9BQU8sQ0FBQyxNQUFNLE1BQWtCLHdEQUF3RDtRQUU3RixNQUFNdUUsU0FBU0MsV0FBV0Y7UUFDMUIsT0FBT0csTUFBTUYsVUFBVSxPQUFPQTtJQUNsQztJQUVBLDRDQUE0QztJQUM1QyxNQUFNN0UsTUFBTWdGLEVBQUUsRUFBRTtRQUNaLE9BQU8sSUFBSUMsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBU0Y7SUFDdEQ7QUFDSjtBQUVBSSxPQUFPQyxPQUFPLEdBQUd6RiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4cGxvcmFkb3ItcHJlY2lvcy1uZXh0anMvLi9saWIvbWVyY2Fkb0xpYnJlU2NyYXBlci5qcz8yZWJjIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTtcclxuY29uc3QgY2hlZXJpbyA9IHJlcXVpcmUoJ2NoZWVyaW8nKTtcclxuY29uc3QgVXNlckFnZW50ID0gcmVxdWlyZSgndXNlci1hZ2VudHMnKTtcclxuXHJcbmNsYXNzIE1lcmNhZG9MaWJyZVNjcmFwZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlVVJMID0gJ2h0dHBzOi8vbGlzdGFkby5tZXJjYWRvbGlicmUuY29tLmFyJztcclxuICAgICAgICB0aGlzLnVzZXJBZ2VudCA9IG5ldyBVc2VyQWdlbnQoKTtcclxuICAgICAgICB0aGlzLmRlbGF5ID0gMTAwMDsgLy8gRGVsYXkgZW50cmUgcmVxdWVzdHMgcGFyYSBzZXIgcmVzcGV0dW9zb3NcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jacOzbiBwYXJhIGxpbXBpYXIgeSBwcmVwYXJhciBlbCB0ZXh0byBkZSBiw7pzcXVlZGFcclxuICAgIHByZXBhcmFyVGV4dG9CdXNxdWVkYShlc3BlY2lmaWNhY2lvbmVzLCBvYnNlcnZhY2lvbmVzKSB7XHJcbiAgICAgICAgbGV0IHRleHRvID0gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGVzcGVjaWZpY2FjaW9uZXMgJiYgZXNwZWNpZmljYWNpb25lcy50cmltKCkpIHtcclxuICAgICAgICAgICAgdGV4dG8gKz0gZXNwZWNpZmljYWNpb25lcy50cmltKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvYnNlcnZhY2lvbmVzICYmIG9ic2VydmFjaW9uZXMudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0bykgdGV4dG8gKz0gJyAnO1xyXG4gICAgICAgICAgICB0ZXh0byArPSBvYnNlcnZhY2lvbmVzLnRyaW0oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGV4dG8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMaW1waWFyIGVsIHRleHRvOiByZW1vdmVyIGNhcmFjdGVyZXMgZXNwZWNpYWxlcywgSFRNTCwgZXRjLlxyXG4gICAgICAgIHRleHRvID0gdGV4dG9cclxuICAgICAgICAgICAgLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZXIgSFRNTCB0YWdzXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc1xcLVxcLl0vZywgJyAnKSAvLyBSZW1vdmVyIGNhcmFjdGVyZXMgZXNwZWNpYWxlcyBleGNlcHRvIGd1aW9uZXMgeSBwdW50b3NcclxuICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKSAvLyBSZWVtcGxhemFyIG3Dumx0aXBsZXMgZXNwYWNpb3MgcG9yIHVubyBzb2xvXHJcbiAgICAgICAgICAgIC50cmltKCk7XHJcblxyXG4gICAgICAgIC8vIFRvbWFyIHNvbG8gbGFzIHByaW1lcmFzIHBhbGFicmFzIG3DoXMgcmVsZXZhbnRlcyAobcOheGltbyAxMCBwYWxhYnJhcylcclxuICAgICAgICBjb25zdCBwYWxhYnJhcyA9IHRleHRvLnNwbGl0KCcgJykuc2xpY2UoMCwgMTApO1xyXG4gICAgICAgIHJldHVybiBwYWxhYnJhcy5qb2luKCcgJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY2nDs24gcGFyYSBoYWNlciBsYSBiw7pzcXVlZGEgZW4gTWVyY2Fkb0xpYnJlXHJcbiAgICBhc3luYyBidXNjYXJQcm9kdWN0byhlc3BlY2lmaWNhY2lvbmVzLCBvYnNlcnZhY2lvbmVzKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dG9CdXNxdWVkYSA9IHRoaXMucHJlcGFyYXJUZXh0b0J1c3F1ZWRhKGVzcGVjaWZpY2FjaW9uZXMsIG9ic2VydmFjaW9uZXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdGV4dG9CdXNxdWVkYSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ05vIGhheSB0ZXh0byBzdWZpY2llbnRlIHBhcmEgYnVzY2FyJyxcclxuICAgICAgICAgICAgICAgIHJlc3VsdGFkb3M6IFtdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWFyY2hVUkwgPSBgJHt0aGlzLmJhc2VVUkx9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KHRleHRvQnVzcXVlZGEpfWA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIEJ1c2NhbmRvIGVuIE1lcmNhZG9MaWJyZTogXCIke3RleHRvQnVzcXVlZGF9XCJgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHNlYXJjaFVSTCwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogdGhpcy51c2VyQWdlbnQudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44JyxcclxuICAgICAgICAgICAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogJ2VzLUFSLGVzO3E9MC45LGVuO3E9MC44JyxcclxuICAgICAgICAgICAgICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyJyxcclxuICAgICAgICAgICAgICAgICAgICAnRE5UJzogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFlclJlc3VsdGFkb3MocmVzcG9uc2UuZGF0YSwgdGV4dG9CdXNxdWVkYSk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGLDunNxdWVkYSBkZSBNZXJjYWRvTGlicmU6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0YWRvczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY2nDs24gcGFyYSBleHRyYWVyIGxvcyByZXN1bHRhZG9zIGRlbCBIVE1MXHJcbiAgICBleHRyYWVyUmVzdWx0YWRvcyhodG1sLCB0ZXh0b0J1c3F1ZWRhKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChodG1sKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0YWRvcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gU2VsZWN0b3JlcyBwYXJhIGxvcyBwcm9kdWN0b3MgKGFjdHVhbGl6YWRvcyBzZWfDum4gZXN0cnVjdHVyYSBhY3R1YWwgZGUgTUwpXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yZXNQcm9kdWN0byA9IFtcclxuICAgICAgICAgICAgICAgICdsaS51aS1zZWFyY2gtbGF5b3V0X19pdGVtOm5vdChbcGljcmVwbGFjZW1lbnRyZXBsYWNlZF0pJywgIC8vIFNlbGVjdG9yIHByaW5jaXBhbCBhY3R1YWxcclxuICAgICAgICAgICAgICAgICdsaS51aS1zZWFyY2gtbGF5b3V0X19pdGVtJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgc2luIGZpbHRyb1xyXG4gICAgICAgICAgICAgICAgJy51aS1zZWFyY2gtcmVzdWx0cyAudWktc2VhcmNoLXJlc3VsdF9fd3JhcHBlcicsICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgICAgICcudWktc2VhcmNoLXJlc3VsdHMgLnVpLXNlYXJjaC1yZXN1bHQnLCAgICAgICAgICAgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICAgICAnLnJlc3VsdHMtaXRlbScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZ2FjeVxyXG4gICAgICAgICAgICAgICAgJy5pdGVtJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwcm9kdWN0b3NFbmNvbnRyYWRvcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiBzZWxlY3RvcmVzUHJvZHVjdG8pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RvcyA9ICQoc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3Rvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdG9zRW5jb250cmFkb3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3Rvcy5lYWNoKChpbmRleCwgZWxlbWVudG8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdGFkb3MubGVuZ3RoID49IDMpIHJldHVybiBmYWxzZTsgLy8gU29sbyBsb3MgcHJpbWVyb3MgM1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJGVsZW1lbnRvID0gJChlbGVtZW50byk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWVyIGluZm9ybWFjacOzbiBkZWwgcHJvZHVjdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGl0dWxvID0gdGhpcy5leHRyYWVyVGl0dWxvKCRlbGVtZW50byk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZWNpbyA9IHRoaXMuZXh0cmFlclByZWNpbygkZWxlbWVudG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gdGhpcy5leHRyYWVyTGluaygkZWxlbWVudG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZW4gPSB0aGlzLmV4dHJhZXJJbWFnZW4oJGVsZW1lbnRvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aXR1bG8gJiYgcHJlY2lvICYmIGxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGFkb3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvOiB0aXR1bG8udHJpbSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWNpbzogcHJlY2lvLnRyaW0oKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlbjogaW1hZ2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2ljaW9uOiByZXN1bHRhZG9zLmxlbmd0aCArIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghcHJvZHVjdG9zRW5jb250cmFkb3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBzZSBlbmNvbnRyYXJvbiBwcm9kdWN0b3MgY29uIGxvcyBzZWxlY3RvcmVzIGNvbm9jaWRvcycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBPcmRlbmFyIHJlc3VsdGFkb3MgcG9yIHByZWNpbyBkZSBtZW5vciBhIG1heW9yXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkb3NPcmRlbmFkb3MgPSB0aGlzLm9yZGVuYXJQb3JQcmVjaW8ocmVzdWx0YWRvcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRleHRvQnVzcXVlZGE6IHRleHRvQnVzcXVlZGEsXHJcbiAgICAgICAgICAgICAgICBjYW50aWRhZEVuY29udHJhZGE6IHJlc3VsdGFkb3NPcmRlbmFkb3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0YWRvczogcmVzdWx0YWRvc09yZGVuYWRvc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleHRyYXllbmRvIHJlc3VsdGFkb3M6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0YWRvczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXh0cmFlclRpdHVsbygkZWxlbWVudG8pIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RvcmVzVGl0dWxvID0gW1xyXG4gICAgICAgICAgICAnYS5wb2x5LWNvbXBvbmVudF9fdGl0bGUnLCAgICAgICAgICAgICAgICAgICAgLy8gU2VsZWN0b3IgcHJpbmNpcGFsIGFjdHVhbFxyXG4gICAgICAgICAgICAnLnVpLXNlYXJjaC1pdGVtX190aXRsZScsICAgICAgICAgICAgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICcuaXRlbV9fdGl0bGUnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgJ2gyIGEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZ2FjeVxyXG4gICAgICAgICAgICAnLml0ZW0tdGl0bGUgYScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICdhW3RpdGxlXScgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHNlbGVjdG9yZXNUaXR1bG8pIHtcclxuICAgICAgICAgICAgY29uc3QgdGl0dWxvID0gJGVsZW1lbnRvLmZpbmQoc2VsZWN0b3IpLmZpcnN0KCkudGV4dCgpIHx8ICRlbGVtZW50by5maW5kKHNlbGVjdG9yKS5maXJzdCgpLmF0dHIoJ3RpdGxlJyk7XHJcbiAgICAgICAgICAgIGlmICh0aXR1bG8gJiYgdGl0dWxvLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpdHVsby50cmltKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZXh0cmFlclByZWNpbygkZWxlbWVudG8pIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RvcmVzUHJlY2lvID0gW1xyXG4gICAgICAgICAgICAnLmFuZGVzLW1vbmV5LWFtb3VudF9fZnJhY3Rpb24nLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3RvciBwcmluY2lwYWwgYWN0dWFsXHJcbiAgICAgICAgICAgICcudWktc2VhcmNoLXByaWNlX19zZWNvbmQtbGluZSAucHJpY2UtdGFnLWFtb3VudCAuYW5kZXMtbW9uZXktYW1vdW50X19mcmFjdGlvbicsICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgJy5wcmljZSAucHJpY2UtdGFnIC5wcmljZS10YWctYW1vdW50IC5hbmRlcy1tb25leS1hbW91bnRfX2ZyYWN0aW9uJywgICAgICAgICAgICAgIC8vIExlZ2FjeVxyXG4gICAgICAgICAgICAnLnVpLXNlYXJjaC1wcmljZSAuYW5kZXMtbW9uZXktYW1vdW50X19mcmFjdGlvbicsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICcucHJpY2UtdGFnLWFtb3VudCAuYW5kZXMtbW9uZXktYW1vdW50X19mcmFjdGlvbicsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgJy5wcmljZSAucHJpY2UtdGFnLWZyYWN0aW9uJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZ2FjeVxyXG4gICAgICAgICAgICAnLml0ZW0tcHJpY2UnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICcucHJpY2UnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHNlbGVjdG9yZXNQcmVjaW8pIHtcclxuICAgICAgICAgICAgY29uc3QgcHJlY2lvID0gJGVsZW1lbnRvLmZpbmQoc2VsZWN0b3IpLmZpcnN0KCkudGV4dCgpO1xyXG4gICAgICAgICAgICBpZiAocHJlY2lvICYmIHByZWNpby50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJCR7cHJlY2lvLnRyaW0oKX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnUHJlY2lvIG5vIGRpc3BvbmlibGUnO1xyXG4gICAgfVxyXG5cclxuICAgIGV4dHJhZXJMaW5rKCRlbGVtZW50bykge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdG9yZXNMaW5rID0gW1xyXG4gICAgICAgICAgICAnYS5wb2x5LWNvbXBvbmVudF9fdGl0bGUnLCAgICAgICAgICAgICAgICAgICAgLy8gU2VsZWN0b3IgcHJpbmNpcGFsIGFjdHVhbFxyXG4gICAgICAgICAgICAnLnVpLXNlYXJjaC1pdGVtX19ncm91cF9fZWxlbWVudCBhJywgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICcudWktc2VhcmNoLWl0ZW1fX3RpdGxlLWxhYmVsJywgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICAgICAgJy5pdGVtX190aXRsZSBhJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZ2FjeVxyXG4gICAgICAgICAgICAnaDIgYScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVnYWN5XHJcbiAgICAgICAgICAgICdhJyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWdhY3lcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHNlbGVjdG9yZXNMaW5rKSB7XHJcbiAgICAgICAgICAgIGNvbnN0ICRsaW5rID0gJGVsZW1lbnRvLmZpbmQoc2VsZWN0b3IpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGxldCBocmVmID0gJGxpbmsuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGhyZWYpIHtcclxuICAgICAgICAgICAgICAgIC8vIExpbXBpYXIgcGFyw6FtZXRyb3MgaW5uZWNlc2FyaW9zIGRlIGxhIFVSTCBkZSBNTFxyXG4gICAgICAgICAgICAgICAgaWYgKGhyZWYuaW5jbHVkZXMoJyMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyZWYgPSBocmVmLnNwbGl0KCcjJylbMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaHJlZi5pbmNsdWRlcygnJmFtcDsnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyZWYgPSBocmVmLnNwbGl0KCcmYW1wOycpWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgc2VhIHVuYSBVUkwgY29tcGxldGFcclxuICAgICAgICAgICAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyZWYgPSAnaHR0cHM6Ly93d3cubWVyY2Fkb2xpYnJlLmNvbS5hcicgKyBocmVmO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaHJlZi5zdGFydHNXaXRoKCdodHRwJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBocmVmID0gJ2h0dHBzOi8vd3d3Lm1lcmNhZG9saWJyZS5jb20uYXIvJyArIGhyZWY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaHJlZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBleHRyYWVySW1hZ2VuKCRlbGVtZW50bykge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdG9yZXNJbWFnZW4gPSBbXHJcbiAgICAgICAgICAgICcudWktc2VhcmNoLXJlc3VsdC1pbWFnZSBpbWcnLFxyXG4gICAgICAgICAgICAnLml0ZW0taW1hZ2UgaW1nJyxcclxuICAgICAgICAgICAgJ2ltZydcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHNlbGVjdG9yZXNJbWFnZW4pIHtcclxuICAgICAgICAgICAgY29uc3Qgc3JjID0gJGVsZW1lbnRvLmZpbmQoc2VsZWN0b3IpLmZpcnN0KCkuYXR0cignc3JjJykgfHwgJGVsZW1lbnRvLmZpbmQoc2VsZWN0b3IpLmZpcnN0KCkuYXR0cignZGF0YS1zcmMnKTtcclxuICAgICAgICAgICAgaWYgKHNyYyAmJiBzcmMuaW5jbHVkZXMoJ2h0dHAnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNyYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jacOzbiBwYXJhIG9yZGVuYXIgcHJvZHVjdG9zIHBvciBwcmVjaW8gZGUgbWVub3IgYSBtYXlvclxyXG4gICAgb3JkZW5hclBvclByZWNpbyhwcm9kdWN0b3MpIHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0b3NPcmRlbmFkb3MgPSBwcm9kdWN0b3Muc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcmVjaW9BID0gdGhpcy5leHRyYWVyTnVtZXJvRGVsUHJlY2lvKGEucHJlY2lvKTtcclxuICAgICAgICAgICAgY29uc3QgcHJlY2lvQiA9IHRoaXMuZXh0cmFlck51bWVyb0RlbFByZWNpbyhiLnByZWNpbyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTaSBubyBzZSBwdWVkZSBleHRyYWVyIGVsIHByZWNpbywgcG9uZXIgYWwgZmluYWxcclxuICAgICAgICAgICAgaWYgKHByZWNpb0EgPT09IG51bGwgJiYgcHJlY2lvQiA9PT0gbnVsbCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGlmIChwcmVjaW9BID09PSBudWxsKSByZXR1cm4gMTtcclxuICAgICAgICAgICAgaWYgKHByZWNpb0IgPT09IG51bGwpIHJldHVybiAtMTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBwcmVjaW9BIC0gcHJlY2lvQjsgLy8gT3JkZW4gYXNjZW5kZW50ZSAobWVub3IgYSBtYXlvcilcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWN0dWFsaXphciBsYSBwb3NpY2nDs24gZGVzcHXDqXMgZGVsIG9yZGVuYW1pZW50b1xyXG4gICAgICAgIHByb2R1Y3Rvc09yZGVuYWRvcy5mb3JFYWNoKChwcm9kdWN0bywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcHJvZHVjdG8ucG9zaWNpb24gPSBpbmRleCArIDE7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBwcm9kdWN0b3NPcmRlbmFkb3M7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY2nDs24gcGFyYSBleHRyYWVyIGVsIG7Dum1lcm8gZGVsIHByZWNpbyAoZWo6IFwiJDYwMy44OTlcIiAtPiA2MDM4OTkpXHJcbiAgICBleHRyYWVyTnVtZXJvRGVsUHJlY2lvKHByZWNpb1N0cmluZykge1xyXG4gICAgICAgIGlmICghcHJlY2lvU3RyaW5nIHx8IHByZWNpb1N0cmluZyA9PT0gJ1ByZWNpbyBubyBkaXNwb25pYmxlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVtb3ZlciBzw61tYm9sbyBkZSBwZXNvLCBlc3BhY2lvcyB5IHB1bnRvcyBkZSBtaWxlc1xyXG4gICAgICAgIGNvbnN0IG51bWVyb0xpbXBpbyA9IHByZWNpb1N0cmluZ1xyXG4gICAgICAgICAgICAucmVwbGFjZSgvWyRcXHNdL2csICcnKSAgICAgICAgICAgLy8gUmVtb3ZlciAkIHkgZXNwYWNpb3NcclxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcLi9nLCAnJykgICAgICAgICAgICAgIC8vIFJlbW92ZXIgcHVudG9zIGRlIG1pbGVzIChlajogNjAzLjg5OSAtPiA2MDM4OTkpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8sL2csICcuJyk7ICAgICAgICAgICAgIC8vIENvbnZlcnRpciBjb21hcyBkZWNpbWFsZXMgYSBwdW50b3MgKGVqOiAxLDUwIC0+IDEuNTApXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbnVtZXJvID0gcGFyc2VGbG9hdChudW1lcm9MaW1waW8pO1xyXG4gICAgICAgIHJldHVybiBpc05hTihudW1lcm8pID8gbnVsbCA6IG51bWVybztcclxuICAgIH1cclxuXHJcbiAgICAvLyBGdW5jacOzbiBwYXJhIGFncmVnYXIgZGVsYXkgZW50cmUgcmVxdWVzdHNcclxuICAgIGFzeW5jIGRlbGF5KG1zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lcmNhZG9MaWJyZVNjcmFwZXI7ICJdLCJuYW1lcyI6WyJheGlvcyIsInJlcXVpcmUiLCJjaGVlcmlvIiwiVXNlckFnZW50IiwiTWVyY2Fkb0xpYnJlU2NyYXBlciIsImNvbnN0cnVjdG9yIiwiYmFzZVVSTCIsInVzZXJBZ2VudCIsImRlbGF5IiwicHJlcGFyYXJUZXh0b0J1c3F1ZWRhIiwiZXNwZWNpZmljYWNpb25lcyIsIm9ic2VydmFjaW9uZXMiLCJ0ZXh0byIsInRyaW0iLCJyZXBsYWNlIiwicGFsYWJyYXMiLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsImJ1c2NhclByb2R1Y3RvIiwidGV4dG9CdXNxdWVkYSIsInN1Y2Nlc3MiLCJlcnJvciIsInJlc3VsdGFkb3MiLCJzZWFyY2hVUkwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJnZXQiLCJoZWFkZXJzIiwidG9TdHJpbmciLCJ0aW1lb3V0IiwiZXh0cmFlclJlc3VsdGFkb3MiLCJkYXRhIiwibWVzc2FnZSIsImh0bWwiLCIkIiwibG9hZCIsInNlbGVjdG9yZXNQcm9kdWN0byIsInByb2R1Y3Rvc0VuY29udHJhZG9zIiwic2VsZWN0b3IiLCJwcm9kdWN0b3MiLCJsZW5ndGgiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50byIsIiRlbGVtZW50byIsInRpdHVsbyIsImV4dHJhZXJUaXR1bG8iLCJwcmVjaW8iLCJleHRyYWVyUHJlY2lvIiwibGluayIsImV4dHJhZXJMaW5rIiwiaW1hZ2VuIiwiZXh0cmFlckltYWdlbiIsInB1c2giLCJwb3NpY2lvbiIsInJlc3VsdGFkb3NPcmRlbmFkb3MiLCJvcmRlbmFyUG9yUHJlY2lvIiwiY2FudGlkYWRFbmNvbnRyYWRhIiwic2VsZWN0b3Jlc1RpdHVsbyIsImZpbmQiLCJmaXJzdCIsInRleHQiLCJhdHRyIiwic2VsZWN0b3Jlc1ByZWNpbyIsInNlbGVjdG9yZXNMaW5rIiwiJGxpbmsiLCJocmVmIiwiaW5jbHVkZXMiLCJzdGFydHNXaXRoIiwic2VsZWN0b3Jlc0ltYWdlbiIsInNyYyIsInByb2R1Y3Rvc09yZGVuYWRvcyIsInNvcnQiLCJhIiwiYiIsInByZWNpb0EiLCJleHRyYWVyTnVtZXJvRGVsUHJlY2lvIiwicHJlY2lvQiIsImZvckVhY2giLCJwcm9kdWN0byIsInByZWNpb1N0cmluZyIsIm51bWVyb0xpbXBpbyIsIm51bWVybyIsInBhcnNlRmxvYXQiLCJpc05hTiIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/mercadoLibreScraper.js\n");

/***/ }),

/***/ "(api)/./pages/api/consultar-precios.js":
/*!****************************************!*\
  !*** ./pages/api/consultar-precios.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/database */ \"(api)/./lib/database.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lib_database__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_mercadoLibreScraper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/mercadoLibreScraper */ \"(api)/./lib/mercadoLibreScraper.js\");\n/* harmony import */ var _lib_mercadoLibreScraper__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lib_mercadoLibreScraper__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst scraper = new (_lib_mercadoLibreScraper__WEBPACK_IMPORTED_MODULE_1___default())();\nasync function handler(req, res) {\n    // Solo permitir método POST\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"M\\xe9todo no permitido. Use POST.\"\n        });\n    }\n    try {\n        const { codigo } = req.body;\n        // Validación de entrada\n        if (!codigo) {\n            return res.status(400).json({\n                error: \"Se requiere un c\\xf3digo para realizar la consulta\"\n            });\n        }\n        if (isNaN(codigo) || parseInt(codigo) <= 0) {\n            return res.status(400).json({\n                error: \"El c\\xf3digo debe ser un n\\xfamero entero positivo\"\n            });\n        }\n        console.log(`🔍 Consultando código: ${codigo}`);\n        // Consulta a la base de datos\n        const resultadosSQL = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.consultarPrecios)(codigo);\n        if (!resultadosSQL || resultadosSQL.length === 0) {\n            return res.status(404).json({\n                error: \"No se encontraron resultados para el c\\xf3digo ingresado\",\n                data: [],\n                count: 0\n            });\n        }\n        // Agregar búsqueda en MercadoLibre para cada resultado\n        const resultadosConML = await Promise.allSettled(resultadosSQL.map(async (row)=>{\n            try {\n                const busquedaML = await scraper.buscarProducto(row.EspecificacionesTecnicas, row.Observaciones);\n                return {\n                    ...row,\n                    mercadoLibre: busquedaML\n                };\n            } catch (error) {\n                console.error(\"Error buscando en MercadoLibre:\", error);\n                return {\n                    ...row,\n                    mercadoLibre: {\n                        success: false,\n                        error: \"Error en b\\xfasqueda\",\n                        resultados: []\n                    }\n                };\n            }\n        }));\n        // Extraer solo los valores exitosos\n        const resultadosFinales = resultadosConML.map((result)=>result.status === \"fulfilled\" ? result.value : result.reason);\n        res.status(200).json({\n            success: true,\n            data: resultadosFinales,\n            count: resultadosFinales.length,\n            message: `Consulta exitosa para código ${codigo}`\n        });\n    } catch (error) {\n        console.error(\"Error en consulta:\", error);\n        res.status(500).json({\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY29uc3VsdGFyLXByZWNpb3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Q7QUFDVTtBQUVoRSxNQUFNRSxVQUFVLElBQUlELGlFQUFtQkE7QUFFeEIsZUFBZUUsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzFDLDRCQUE0QjtJQUM1QixJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN2QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ3hCQyxPQUFPO1FBQ1g7SUFDSjtJQUVBLElBQUk7UUFDQSxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHTixJQUFJTyxJQUFJO1FBRTNCLHdCQUF3QjtRQUN4QixJQUFJLENBQUNELFFBQVE7WUFDVCxPQUFPTCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUN4QkMsT0FBTztZQUNYO1FBQ0o7UUFFQSxJQUFJRyxNQUFNRixXQUFXRyxTQUFTSCxXQUFXLEdBQUc7WUFDeEMsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDeEJDLE9BQU87WUFDWDtRQUNKO1FBRUFLLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVCQUF1QixFQUFFTCxPQUFPLENBQUM7UUFFOUMsOEJBQThCO1FBQzlCLE1BQU1NLGdCQUFnQixNQUFNaEIsK0RBQWdCQSxDQUFDVTtRQUU3QyxJQUFJLENBQUNNLGlCQUFpQkEsY0FBY0MsTUFBTSxLQUFLLEdBQUc7WUFDOUMsT0FBT1osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDeEJDLE9BQU87Z0JBQ1BTLE1BQU0sRUFBRTtnQkFDUkMsT0FBTztZQUNYO1FBQ0o7UUFFQSx1REFBdUQ7UUFDdkQsTUFBTUMsa0JBQWtCLE1BQU1DLFFBQVFDLFVBQVUsQ0FDNUNOLGNBQWNPLEdBQUcsQ0FBQyxPQUFPQztZQUNyQixJQUFJO2dCQUNBLE1BQU1DLGFBQWEsTUFBTXZCLFFBQVF3QixjQUFjLENBQzNDRixJQUFJRyx3QkFBd0IsRUFDNUJILElBQUlJLGFBQWE7Z0JBR3JCLE9BQU87b0JBQ0gsR0FBR0osR0FBRztvQkFDTkssY0FBY0o7Z0JBQ2xCO1lBQ0osRUFBRSxPQUFPaEIsT0FBTztnQkFDWkssUUFBUUwsS0FBSyxDQUFDLG1DQUFtQ0E7Z0JBQ2pELE9BQU87b0JBQ0gsR0FBR2UsR0FBRztvQkFDTkssY0FBYzt3QkFDVkMsU0FBUzt3QkFDVHJCLE9BQU87d0JBQ1BzQixZQUFZLEVBQUU7b0JBQ2xCO2dCQUNKO1lBQ0o7UUFDSjtRQUdKLG9DQUFvQztRQUNwQyxNQUFNQyxvQkFBb0JaLGdCQUFnQkcsR0FBRyxDQUFDVSxDQUFBQSxTQUMxQ0EsT0FBTzFCLE1BQU0sS0FBSyxjQUFjMEIsT0FBT0MsS0FBSyxHQUFHRCxPQUFPRSxNQUFNO1FBR2hFOUIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNqQnNCLFNBQVM7WUFDVFosTUFBTWM7WUFDTmIsT0FBT2Esa0JBQWtCZixNQUFNO1lBQy9CbUIsU0FBUyxDQUFDLDZCQUE2QixFQUFFMUIsT0FBTyxDQUFDO1FBQ3JEO0lBRUosRUFBRSxPQUFPRCxPQUFPO1FBQ1pLLFFBQVFMLEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ2pCQyxPQUFPO1lBQ1A0QixTQUFTQyxLQUF5QixHQUFnQjdCLE1BQU0yQixPQUFPLEdBQUc7UUFDdEU7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhwbG9yYWRvci1wcmVjaW9zLW5leHRqcy8uL3BhZ2VzL2FwaS9jb25zdWx0YXItcHJlY2lvcy5qcz9iZDM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnN1bHRhclByZWNpb3MgfSBmcm9tICcuLi8uLi9saWIvZGF0YWJhc2UnO1xyXG5pbXBvcnQgTWVyY2Fkb0xpYnJlU2NyYXBlciBmcm9tICcuLi8uLi9saWIvbWVyY2Fkb0xpYnJlU2NyYXBlcic7XHJcblxyXG5jb25zdCBzY3JhcGVyID0gbmV3IE1lcmNhZG9MaWJyZVNjcmFwZXIoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAgIC8vIFNvbG8gcGVybWl0aXIgbcOpdG9kbyBQT1NUXHJcbiAgICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXHJcbiAgICAgICAgICAgIGVycm9yOiAnTcOpdG9kbyBubyBwZXJtaXRpZG8uIFVzZSBQT1NULicgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGNvZGlnbyB9ID0gcmVxLmJvZHk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVmFsaWRhY2nDs24gZGUgZW50cmFkYVxyXG4gICAgICAgIGlmICghY29kaWdvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdTZSByZXF1aWVyZSB1biBjw7NkaWdvIHBhcmEgcmVhbGl6YXIgbGEgY29uc3VsdGEnIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc05hTihjb2RpZ28pIHx8IHBhcnNlSW50KGNvZGlnbykgPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnRWwgY8OzZGlnbyBkZWJlIHNlciB1biBuw7ptZXJvIGVudGVybyBwb3NpdGl2bycgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYPCflI0gQ29uc3VsdGFuZG8gY8OzZGlnbzogJHtjb2RpZ299YCk7XHJcblxyXG4gICAgICAgIC8vIENvbnN1bHRhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdGFkb3NTUUwgPSBhd2FpdCBjb25zdWx0YXJQcmVjaW9zKGNvZGlnbyk7XHJcblxyXG4gICAgICAgIGlmICghcmVzdWx0YWRvc1NRTCB8fCByZXN1bHRhZG9zU1FMLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdObyBzZSBlbmNvbnRyYXJvbiByZXN1bHRhZG9zIHBhcmEgZWwgY8OzZGlnbyBpbmdyZXNhZG8nLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogW10sXHJcbiAgICAgICAgICAgICAgICBjb3VudDogMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFncmVnYXIgYsO6c3F1ZWRhIGVuIE1lcmNhZG9MaWJyZSBwYXJhIGNhZGEgcmVzdWx0YWRvXHJcbiAgICAgICAgY29uc3QgcmVzdWx0YWRvc0Nvbk1MID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxyXG4gICAgICAgICAgICByZXN1bHRhZG9zU1FMLm1hcChhc3luYyAocm93KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1c3F1ZWRhTUwgPSBhd2FpdCBzY3JhcGVyLmJ1c2NhclByb2R1Y3RvKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuRXNwZWNpZmljYWNpb25lc1RlY25pY2FzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuT2JzZXJ2YWNpb25lc1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJjYWRvTGlicmU6IGJ1c3F1ZWRhTUxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBidXNjYW5kbyBlbiBNZXJjYWRvTGlicmU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyY2Fkb0xpYnJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAnRXJyb3IgZW4gYsO6c3F1ZWRhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGFkb3M6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIEV4dHJhZXIgc29sbyBsb3MgdmFsb3JlcyBleGl0b3Nvc1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdGFkb3NGaW5hbGVzID0gcmVzdWx0YWRvc0Nvbk1MLm1hcChyZXN1bHQgPT4gXHJcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gcmVzdWx0LnZhbHVlIDogcmVzdWx0LnJlYXNvblxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgZGF0YTogcmVzdWx0YWRvc0ZpbmFsZXMsXHJcbiAgICAgICAgICAgIGNvdW50OiByZXN1bHRhZG9zRmluYWxlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBDb25zdWx0YSBleGl0b3NhIHBhcmEgY8OzZGlnbyAke2NvZGlnb31gXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBjb25zdWx0YTonLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgICAgICAgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicsXHJcbiAgICAgICAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZSBiYXNlIGRlIGRhdG9zJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59ICJdLCJuYW1lcyI6WyJjb25zdWx0YXJQcmVjaW9zIiwiTWVyY2Fkb0xpYnJlU2NyYXBlciIsInNjcmFwZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29kaWdvIiwiYm9keSIsImlzTmFOIiwicGFyc2VJbnQiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0YWRvc1NRTCIsImxlbmd0aCIsImRhdGEiLCJjb3VudCIsInJlc3VsdGFkb3NDb25NTCIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwibWFwIiwicm93IiwiYnVzcXVlZGFNTCIsImJ1c2NhclByb2R1Y3RvIiwiRXNwZWNpZmljYWNpb25lc1RlY25pY2FzIiwiT2JzZXJ2YWNpb25lcyIsIm1lcmNhZG9MaWJyZSIsInN1Y2Nlc3MiLCJyZXN1bHRhZG9zIiwicmVzdWx0YWRvc0ZpbmFsZXMiLCJyZXN1bHQiLCJ2YWx1ZSIsInJlYXNvbiIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/consultar-precios.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fconsultar-precios&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cconsultar-precios.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();